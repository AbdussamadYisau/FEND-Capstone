var Client=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){},function(e,t,r){"use strict";r.r(t),r.d(t,"performAction",(function(){return c})),r.d(t,"deleteTrip",(function(){return a})),r.d(t,"submit",(function(){return m}));r(0);const o={},n=document.querySelector("#tripDetailsSection"),a=(document.querySelector(".mainBody"),document.querySelector("#remove"));function c(e){e.preventDefault(),o.whereFrom=document.querySelector("#whereFrom").value,o.whereTo=document.querySelector("#whereTo").value,o.date=document.querySelector("#departureDate").value,o.returnDate=document.querySelector("#returnDate").value,o.daystogo=d(o.date),o.daysaway=y(o.returnDate,o.date);try{i(o.whereTo).then(e=>{const t=e.geonames[0].lat,r=e.geonames[0].lng;return u(t,r,o.date)}).then(e=>(o.temperature=e.data[0].temp,o.weather_condition=e.data[0].weather.description,l(o.whereTo))).then(e=>(e.hits.length>0&&(o.cityImage=e.hits[0].largeImageURL),s(o))).then(e=>{!function(e){n.classList.remove("invisible"),n.scrollIntoView({behavior:"smooth"});let t=document.querySelector("#destination"),r=document.querySelector("#boarding"),o=document.querySelector("#departingDate"),a=document.querySelector("#numberOfDays"),c=document.querySelector("#daysAwayOnTrip"),i=document.querySelector("#temperature"),u=document.querySelector("#destinationPhoto"),l=document.querySelector("#weather");t.innerHTML=e.to,r.innerText=e.from,o.innerHTML=e.date,e.daystogo<0?document.querySelector("#daystogo").innerHTML="Seems like you have missed your flight!":a.innerHTML=e.daystogo;e.daysaway<0?document.querySelector("#daysaway").innerHTML="There must be some sort of error. Try again!":c.innerHTML=e.daysaway;i.innerHTML=e.temperature+"&#8451;",void 0!==e.cityImage&&u.setAttribute("src",e.cityImage);l.innerHTML=e.weather}(e)})}catch(e){console.log("error",e)}}a.addEventListener("click",(function(e){document.querySelector("#tripForm"),n.classList.add("invisible"),location.reload()}));const i=async e=>{const t=await fetch(`https://secure.geonames.org/searchJSON?q=${e}&maxRows=10&username=sammieyisau`);try{return await t.json()}catch(e){console.log("error",e)}},u=async(e,t,r)=>{const o=Math.floor(new Date(r).getTime()/1e3),n=new Date;let a;if(o<Math.floor(new Date(n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()).getTime()/1e3)){let o=new Date(r);o.setDate(o.getDate()+1),a=await fetch(`https://api.weatherbit.io/v2.0/history/daily?lat=${e}&lon=${t}&start_date=${r}end_date=${o}&key=${weatherbitkey}`)}else a=await fetch(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${e}&lon=${t}&key=26ce153221364218b08d75d11be68644`);try{return await a.json()}catch(e){console.log("error",e)}},l=async e=>{const t=await fetch(`https://pixabay.com/api/?key=16471602-8e4cf128d083ab992b7ab8332&q=${e} city&image_type=photo`);try{return await t.json()}catch(e){console.log("error",e)}},s=async e=>{const t=await fetch("/addData",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await t.json()}catch(e){console.log("error",e)}};let d=function(e){let t=new Date(e),r=new Date;return Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()))/864e5)},y=function(e,t){let r=new Date(e),o=new Date(t);return Math.floor((Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())-Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()))/864e5)};const m=document.querySelector("#submitForm");m.addEventListener("click",c)}]);